<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>환율 계산</title>
    <script>
        async function convert(){
            const from = document.getElementById('from').value;
            const to = document.getElementById('to').value;
            const amount = document.getElementById('amount').value;
            const res = await fetch(`/convert_currency?from=${from}&to=${to}&amount=${amount}`);
            const data = await res.json();
            if(data.result !== undefined){
                document.getElementById('result').innerText = `${amount} ${from} = ${data.result} ${to} (환율: ${data.rate})`;
            } else {
                document.getElementById('result').innerText = data.error;
            }
        }
    </script>
</head>
<body>
    <h1>환율 계산</h1>
    <p>
        <select id="from">
            {% for k,v in currencies.items() %}<option value="{{ k }}">{{ v }}</option>{% endfor %}
        </select>
        →
        <select id="to">
            {% for k,v in currencies.items() %}<option value="{{ k }}">{{ v }}</option>{% endfor %}
        </select>
    </p>
    <p>금액: <input type="number" id="amount" value="1"></p>
    <button onclick="convert()">변환</button>
    <p id="result"></p>
</body>
</html>
