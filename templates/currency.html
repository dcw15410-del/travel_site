<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>환율 계산기</title>
    <script>
        async function convertCurrency() {
            const from = document.getElementById("from").value;
            const to = document.getElementById("to").value;
            const amount = document.getElementById("amount").value;

            const res = await fetch(`/convert_currency?from=${from}&to=${to}&amount=${amount}`);
            const data = await res.json();

            const resultBox = document.getElementById("result");
            if (data.result !== undefined) {
                resultBox.innerText = `${amount} ${from} → ${data.result} ${to} (환율: ${data.rate})`;
            } else {
                resultBox.innerText = "환율 계산 실패: " + (data.error || "알 수 없는 오류");
            }
        }
    </script>
</head>
<body>
    <h2>환율 계산기</h2>
    <input type="number" id="amount" value="1" step="0.01">
    <select id="from">
        {% for code, name in currencies.items() %}
        <option value="{{ code }}">{{ name }} ({{ code }})</option>
        {% endfor %}
    </select>
    →
    <select id="to">
        {% for code, name in currencies.items() %}
        <option value="{{ code }}">{{ name }} ({{ code }})</option>
        {% endfor %}
    </select>
    <button onclick="convertCurrency()">변환</button>

    <p id="result"></p>
</body>
</html>
