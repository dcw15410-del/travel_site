{% extends "base.html" %}
{% block title %}환율 계산기{% endblock %}
{% block content %}
<h2>환율 계산기</h2>
<form id="currency-form" class="row g-3">
  <div class="col-md-3"><input type="number" id="amount" class="form-control" value="1"></div>
  <div class="col-md-3">
    <select id="from" class="form-select">
      <option value="USD">USD</option><option value="KRW">KRW</option><option value="JPY">JPY</option>
      <option value="EUR">EUR</option><option value="CNY">CNY</option><option value="THB">THB</option>
      <option value="VND">VND</option><option value="PHP">PHP</option>
    </select>
  </div>
  <div class="col-md-3">
    <select id="to" class="form-select">
      <option value="KRW">KRW</option><option value="USD">USD</option><option value="JPY">JPY</option>
      <option value="EUR">EUR</option><option value="CNY">CNY</option><option value="THB">THB</option>
      <option value="VND">VND</option><option value="PHP">PHP</option>
    </select>
  </div>
  <div class="col-md-3"><button class="btn btn-primary w-100">계산</button></div>
</form>
<div id="result" class="mt-3"></div>
<script>
document.getElementById("currency-form").onsubmit = async e=>{
  e.preventDefault();
  const amount=document.getElementById("amount").value;
  const from=document.getElementById("from").value;
  const to=document.getElementById("to").value;
  const res=await fetch(`/convert_currency?from=${from}&to=${to}&amount=${amount}`);
  const data=await res.json();
  if(data.error){
    document.getElementById("result").innerHTML=`<div class="alert alert-danger">${data.error}</div>`;
  }else{
    document.getElementById("result").innerHTML=`<div class="alert alert-success">${amount} ${from} → ${data.result} ${to} (환율: ${data.rate})</div>`;
  }
}
</script>
{% endblock %}
