{% extends "base.html" %}
{% block title %}환율 계산{% endblock %}
{% block content %}
<h1>환율 계산</h1>
<div class="row mb-3">
    <div class="col"><input type="number" id="amount" class="form-control" placeholder="금액" value="1"></div>
    <div class="col">
        <select id="from_cur" class="form-select">
            {% for code,name in currencies.items() %}
                <option value="{{ code }}">{{ name }}({{ code }})</option>
            {% endfor %}
        </select>
    </div>
    <div class="col">
        <select id="to_cur" class="form-select">
            {% for code,name in currencies.items() %}
                <option value="{{ code }}">{{ name }}({{ code }})</option>
            {% endfor %}
        </select>
    </div>
    <div class="col"><button id="convertBtn" class="btn btn-primary">변환</button></div>
</div>
<div id="result"></div>

<script>
document.getElementById('convertBtn').onclick = function(){
    const amount = document.getElementById('amount').value;
    const from_cur = document.getElementById('from_cur').value;
    const to_cur = document.getElementById('to_cur').value;
    fetch(`/convert_currency?from=${from_cur}&to=${to_cur}&amount=${amount}`)
        .then(r=>r.json())
        .then(data=>{
            if(data.result){
                document.getElementById('result').innerText = `${amount} ${from_cur} = ${data.result} ${to_cur} (환율: ${data.rate})`;
            } else {
                document.getElementById('result').innerText = `오류: ${data.error}`;
            }
        });
};
</script>
{% endblock %}
