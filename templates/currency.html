<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>환율 계산기</title>
    <script>
        async function convert() {
            const from = document.getElementById("from").value;
            const to = document.getElementById("to").value;
            const amount = document.getElementById("amount").value;
            const res = await fetch(`/convert_currency?from=${from}&to=${to}&amount=${amount}`);
            const data = await res.json();
            if (data.result) {
                document.getElementById("result").innerText =
                    `${amount} ${from} = ${data.result} ${to} (환율: ${data.rate})`;
            } else {
                document.getElementById("result").innerText = "환율 계산 실패: " + (data.error || "");
            }
        }
    </script>
</head>
<body>
    <h2>환율 계산기</h2>
    <input type="number" id="amount" value="1" min="0" step="0.01">
    <select id="from">
        {% for code, name in currencies.items() %}
        <option value="{{ code }}">{{ code }} - {{ name }}</option>
        {% endfor %}
    </select>
    →
    <select id="to">
        {% for code, name in currencies.items() %}
        <option value="{{ code }}">{{ code }} - {{ name }}</option>
        {% endfor %}
    </select>
    <button onclick="convert()">변환</button>
    <p id="result"></p>
</body>
</html>
